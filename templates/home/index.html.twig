{% extends 'base.html.twig' %}

{% block title %}
  Accueil | FlexiBank
{% endblock %}

{% block stylesheets %}
  <style>
    .modern-navbar {
      position: fixed;
      top: 0;
      height: 90px;
      width: 100%;
      padding: 0 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      z-index: 1000;
      backdrop-filter: blur(10px);
      background: var(--navbar-bg-dark);
      border-bottom: 1px solid var(--navbar-border-dark);
      transition: background 0.3s ease, border-color 0.3s ease;
    }
    
    body:not(.dark) .modern-navbar {
      background: var(--navbar-bg-light);
      border-bottom: 1px solid var(--navbar-border-light);
    }
    
    body.light .modern-navbar {
      background: var(--navbar-bg-light);
      border-bottom: 1px solid var(--navbar-border-light);
    }
    
    body.light .modern-navbar {
      background-color: white;
      border-bottom: 1px solid #e0e0e0;
    }
    body.light-mode .btn-primary2 {
      color: white;
    }
    body.light .nav-links li a {
      color: #222 !important;
    }
    
    body.light .nav-links li a:hover {
      color: var(--primary-color);
    }
    
    body.light .logo {
      color: var(--primary-color);
    }
    
    body.light .btn-secondary {
      color: var(--primary-color);
      border-color: var(--primary-color);
    }
    
    body.light .btn-secondary:hover {
      background-color: var(--primary-color);
      color: var(--black);
    }
    
    body.light .btn-primary {
      background-color: var(--primary-color);
      color: var(--black);
    }
    
    body.light .btn-primary:hover {
      background-color: var(--primary-color-hover);
      color: var(--black);
    }
    
    .navbar-container {
      width: 100%;
      max-width: var(--container-max-width, 1300px);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 30px;
      margin-right: 20px;
    }
    
    /* Boutons à droite */
    .nav-cta {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-right: -20px;
      width: 100%;
    }
    
    .logo {
      font-size: var(--logo-font-size);
      font-weight: var(--font-bold);
      color: var(--primary-color);
      text-decoration: none;
    }
    
    .logo-content {
      display: flex;
      align-items: center;
      gap: 0px;
      margin-left: -50px;
    }
    
    .logo-content img {
      height: auto;
      max-height: 60px;
      display: block;
      margin-left: 90px;
    }
    
    .logo-text {
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--primary-color);
      margin-top: 9px;
    }
    
    /* Liens de navigation */
    
    .nav-links li a {
      color: var(--text-color);
      text-decoration: none;
      transition: color 0.3s ease;
      padding: 5px 0;
      font-family: 'Inter', sans-serif;
      font-weight: 500;
      margin-right: -20px;
    }
    
    .nav-links li a:hover {
      color: var(--primary-color);
    }
    
    /* Bouton navigation */
    .btn-nav {
      background-color: var(--primary-color);
      color: var(--bg-color);
      padding: 10px 20px;
      border-radius: 25px;
      text-decoration: none;
      font-weight: 600;
      margin-right: 90px;
      transition: background-color 0.3s ease;
    }
    
    .btn-nav:hover {
      background-color: var(--primary-color-hover);
    }
    
    .btn-primary {
      background-color: var(--primary-color);
      color: var(--bg-color);
      padding: 14px 30px;
      border: none;
      border-radius: 30px;
      text-decoration: none;
      font-weight: 600;
      transition: transform 0.3s ease, background-color 0.3s ease;
      display: inline-block;
    }
    
    .btn-primary:hover {
      background-color: var(--primary-color-hover);
      color: var(--text-color);
      transform: scale(1.05);
    }
    
    .btn-secondary {
      background: transparent;
      color: var(--primary-color);
      padding: 14px 30px;
      border: 2px solid var(--primary-color);
      border-radius: 30px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .btn-secondary:hover {
      background: var(--primary-color);
      color: var(--text-color);
      border-color: var(--primary-color);
    }
    
    @media (max-width: 768px) {
      .btn-primary {
        font-size: 0.95rem;
        padding: 10px 20px;
        width: auto;
        max-width: 250px;
      }
    }
    
    .theme-toggle {
      width: 32px;
      height: 32px;
      background: transparent;
      border: none;
      font-size: 18px;
      color: var(--text-color);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease, color 0.3s ease;
      padding: 0;
    }
    
    .theme-toggle i {
      width: 18px;
      height: 18px;
      display: block;
      text-align: center;
      line-height: 1;
      font-size: 18px;
    }
    
    .theme-toggle:hover {
      transform: scale(1.2);
    }
    
    .nav-menu {
      display: flex;
      align-items: center;
      gap: 30px;
    }
    
    .nav-links {
      list-style: none;
      display: flex;
      gap: 60px;
      margin-right: 200px;
    }
    
    .nav-links li a {
      color: var(--text-color);
      text-decoration: none;
      transition: color 0.3s ease;
      padding: 5px 0;
      font-family: 'Inter', sans-serif;
      font-weight: 100;
    }
    
    .nav-links li a:hover {
      color: var(--primary-color);
    }
    
    .hamburger {
      display: none;
      background: none;
      border: none;
      font-size: 24px;
      color: white;
      cursor: pointer;
      z-index: 1001;
      margin-right: 50px;
      margin-top: 10px;
    }
    
    .only-desktop {
      display: flex;
      gap: 10px;
    }
    
    @media (max-width: 768px) {
      .only-desktop {
        display: none !important;
      }
    }
    
    .only-mobile {
      display: none;
    }
    
    @media (max-width: 768px) {
      .only-mobile {
        display: flex !important;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 12px;
        margin: 20px auto 0;
        width: 100%;
      }
    
      .only-mobile a {
        display: block;
        width: 80%;
        max-width: 220px;
        padding: 12px 18px;
        font-size: 0.95rem;
        font-weight: 600;
        text-align: center;
        border-radius: 30px;
        transition: all 0.3s ease;
      }
    
      .only-mobile a.btn-primary {
        background-color: var(--primary-color);
        color: var(--bg-color);
        border: none;
        font-size: 15px;
        padding: 10px 20px;
        margin: 10px auto 0; /* centré */
        display: block;
        text-align: center;
      }
    
      .only-mobile a:hover {
        transform: scale(1.03);
        opacity: 0.9;
      }
    }
    
    @media (max-width: 768px) {
      .nav-links-cta {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
        margin-top: 10px;
        width: 100%;
      }
    
      .nav-links-cta a {
        display: block;
        width: 80%;
        max-width: 220px;
        padding: 12px 20px;
        font-size: 1rem;
        font-weight: 600;
        text-align: center;
        border-radius: 30px;
        transition: all 0.3s ease;
      }
    
      .nav-links-cta a.btn-primary {
        background-color: var(--primary-color);
        color: var(--bg-color);
        border: none;
      }
    
      .nav-links-cta a.btn-secondary {
        background: transparent;
        border: 2px solid var(--primary-color);
        color: var(--primary-color);
      }
    
      .nav-links-cta a:hover {
        transform: scale(1.03);
        opacity: 0.9;
      }
    }
    
    @media (max-width: 768px) {
      body:not(.logged-in) .nav-links {
        display: none !important;
      }
    }
    
    @media (max-width: 768px) {
      .nav-links li.hide-when-guest {
        display: none !important;
      }
    
      body.logged-in .nav-links li.hide-when-client {
        display: none !important;
      }
    }
    
    .mobile-menu {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center; /* pour un meilleur centrage vertical */
      background-color: #ffffff; /* ou var(--navbar-bg-light) selon ton thème */
      padding: 20px 0;
      position: absolute;
      top: 90px;
      left: 0;
      width: 100%;
      z-index: 999;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* optionnel : ajoute une ombre pour la lisibilité */
      border-bottom: 1px solid #e0e0e0;
    }
    
    .mobile-menu.show {
      display: flex;
    }
    
    .mobile-menu a {
      display: block;
      width: 90%; /* légèrement plus large mais toujours responsive */
      max-width: 240px;
      padding: 12px 18px;
      font-size: 1rem;
      font-weight: 600;
      text-align: center;
      border-radius: 30px;
      margin: 8px 0;
    }
    
    @media (max-width: 768px) {
      .hamburger {
        display: block;
        background: none;
        border: none;
        font-size: 24px;
        color: white;
        cursor: pointer;
        z-index: 1001;
      }
    
      .only-desktop {
        display: none !important;
      }
    
      .mobile-menu a {
        display: block;
        width: 80%;
        max-width: 240px;
        padding: 12px 18px;
        font-size: 1rem;
        font-weight: 600;
        text-align: center;
        border-radius: 30px;
        margin: 5px 0;
        margin-left: -77px;
      }
    
      .mobile-menu a.btn-primary {
        background-color: var(--primary-color);
        color: var(--bg-color);
        border: none;
      }
    
      .mobile-menu a.btn-secondary {
        background: transparent;
        border: 2px solid var(--primary-color);
        color: var(--primary-color);
      }
    }
    
    .nav-links li {
      display: flex;
      align-items: center;
    }
    
    @media (max-width: 768px) {
      .mobile-login {
        font-size: 0.85rem;
        padding: 8px 14px;
        border-radius: 25px;
        background-color: var(--primary-color);
        color: var(--bg-color);
        text-decoration: none;
        font-weight: 600;
        margin-left: -100px;
        margin-top: 5px;
        display: inline-block;
      }
    }
    
    @media (min-width: 769px) {
      .d-md-none {
        display: none !important;
      }
    }
    
    @media (max-width: 768px) {
      .d-md-none {
        display: inline-block !important;
      }
    }
    
    @media (max-width: 768px) {
      .modern-navbar .btn-secondary.d-md-none {
        margin-left: 0;
        margin-right: -50px;
        font-size: 0.85rem;
        padding: 8px 16px;
        border-radius: 25px;
        width: auto;
        max-width: 150px;
        height: auto;
      }
    }
    
    .background-video,
    .background-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 1;
      pointer-events: none; /* facultatif : évite tout clic dessus */
    }
    
    .background-image.only-mobile {
      display: none;
    }
    
    /* Affiche l'image et cache la vidéo sur mobile */
    @media screen and (max-width: 768px) {
      .background-video {
        display: none !important;
      }
    
      .background-image.only-mobile {
        display: block !important;
      }
    }
    
    .hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      background: rgba(0, 0, 0, 0.4); /* facultatif */
      z-index: 2;
    }
    
    .hero-content {
      position: relative;
      z-index: 3;
      text-align: center;
      color: white;
      padding-top: 100px;
    }
    
  </style>

  <link rel="stylesheet" href="{{ asset('css/home/index.css') }}" />
  <script src="{{ asset('js/home.js') }}" defer></script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
{% endblock %}

{% block body %}
  <div id="preloader">
    <div class="loader-ring">
      <img src="{{ asset('images/logo-flexibank.png') }}" alt="Logo FlexiBank" class="loader-logo" />
    </div>
  </div>

  <nav class="modern-navbar">
    <div class="navbar-container">
      <a href="{{ path('app_home') }}" class="logo">
        <span class="logo-content">
          <img src="{{ asset('images/logo-flexibank.png') }}" alt="Logo FlexiBank" />
          <span class="logo-text">FlexiBank</span>
        </span>
      </a>

      {% if app.user and 'ROLE_CLIENT' in app.user.roles %}
        <button class="hamburger" id="hamburger-btn" aria-label="Menu"><i class="fas fa-bars"></i></button>
      {% elseif not app.user %}
        <a href="{{ path('app_login') }}" class="btn-secondary d-md-none" style="margin-right: 20px;">Se connecter</a>
      {% endif %}
    </div>

    <div class="nav-menu only-desktop">
      <ul class="nav-links">
        {% if not app.user or ('ROLE_USER' in app.user.roles and (app.user.roles|length) == 1) %}
          <li>
            <a href="#services">Services</a>
          </li>
          <li>
            <a href="#avantages">Avantages</a>
          </li>
          <li>
            <a href="{{ path('contact') }}">Contact</a>
          </li>
        {% elseif 'ROLE_CLIENT' in app.user.roles %}
          <li>
            <a href="{{ path('account_profile') }}">Comptes</a>
          </li>
          <li>
            <a href="{{ path('app_services') }}">Services</a>
          </li>
          <li>
            <a href="{{ path('card_dashboard') }}">Cartes</a>
          </li>
          <li>
            <a href="{{ path('app_investissements') }}">Investissements</a>
          </li>
        {% endif %}
      </ul>
    </div>

    <div class="nav-cta only-desktop">
      {% if not app.user %}
        <a href="{{ path('app_login') }}" class="btn-secondary">Se connecter</a>
        <a href="{{ path('app_register') }}" class="btn-primary">Créer un compte</a>
      {% elseif 'ROLE_ADMIN' in app.user.roles %}
        <a href="{{ path('admin_dashboard') }}" class="btn-primary"><i class="fas fa-user-shield" style="margin-right: 8px;"></i>Espace Admin</a>
        <a href="{{ path('newsletter_export') }}" class="btn-secondary"><i class="fas fa-download" style="margin-right: 6px;"></i>Exporter Newsletter</a>
      {% elseif 'ROLE_CLIENT' in app.user.roles %}
        <a href="{{ path('dashboard2') }}" class="btn-primary"><i class="fas fa-lock" style="margin-right: 8px;"></i>Mon Espace</a>
      {% endif %}
      <button class="theme-toggle" id="theme-toggle" aria-label="Changer de thème"><i class="fas fa-moon"></i></button>
    </div>

    {% if app.user and 'ROLE_CLIENT' in app.user.roles %}
      <div class="mobile-menu" id="mobile-menu">
        <a href="{{ path('account_profile') }}" class="btn-secondary">Comptes</a>
        <a href="{{ path('app_services') }}" class="btn-secondary">Services</a>
        <a href="{{ path('card_dashboard') }}" class="btn-secondary">Cartes</a>
        <a href="{{ path('app_investissements') }}" class="btn-secondary">Investissements</a>
        <a href="{{ path('dashboard2') }}" class="btn-primary">Mon Espace</a>
      </div>
    {% endif %}
  </nav>

  <section class="hero-modern" style="position: relative; height: 100vh; overflow: hidden;">
    <!-- Vidéo de fond -->
    <video autoplay muted loop playsinline preload="auto" loading="lazy" class="background-video">
      <source src="{{ asset('images/background.mp4') }}" type="video/mp4" />Votre navigateur ne supporte pas la lecture vidéo.
    </video>

    <!-- Image de fond (mobile uniquement) -->
    <img src="{{ asset('images/mobile.png') }}" alt="Fond mobile" class="background-image only-mobile" />

    <!-- Overlay pour assombrir la vidéo si besoin -->
    <div class="hero-overlay"></div>

    <!-- Contenu principal au-dessus -->
    <div class="hero-content">
      <h1>FlexiBank, la banque de demain</h1>
      <p>Gérez, investissez, réalisez vos projets avec flexibilité et sécurité.</p>

      {% if not app.user or ('ROLE_CLIENT' not in app.user.roles and 'ROLE_ADMIN' not in app.user.roles and 'ROLE_SUPPORT' not in app.user.roles and 'ROLE_JURY' not in app.user.roles) %}
        <div class="hero-buttons">
          <a href="{{ path('client_step1') }}" class="btn-primary">Commencer maintenant</a>
          <a href="#services" class="btn-secondary">Découvrir nos services</a>
        </div>
      {% endif %}
    </div>
  </section>

  <!-- SECTION SERVICES -->
  <section id="services" class="modern-section fade-in">
    <div class="section-header">
      <h2>Des services innovants à portée de main</h2>
      <p>Tout ce dont vous avez besoin, accessible 24/7.</p>
    </div>
    <div class="services-grid">
      <div class="service-card fade-in">
        <i class="fas fa-mobile-alt"></i>
        <h3>Application mobile</h3>
        <p>Gérez vos comptes en toute simplicité depuis votre smartphone.</p>
      </div>
      <div class="service-card fade-in">
        <i class="fas fa-credit-card"></i>
        <h3>Cartes virtuelles</h3>
        <p>Sécurisez vos paiements en ligne avec des cartes temporaires.</p>
      </div>
      <div class="service-card fade-in">
        <i class="fas fa-piggy-bank"></i>
        <h3>Épargne intelligente</h3>
        <p>Atteignez vos objectifs plus rapidement grâce à des stratégies automatisées.</p>
      </div>
    </div>
  </section>

  <!-- SECTION AVANTAGES -->

  <section id="avantages" class="modern-section avantages-section">
    <div class="section-header">
      <h2>Pourquoi choisir FlexiBank ?</h2>
      <p>Des avantages concrets pensés pour vous simplifier la vie.</p>
    </div>
    <div class="avantages-grid">
      <div class="avantage-card fade-in">
        <i class="fas fa-bolt" style="color:#9a22ed;"></i>
        <h3>Ouverture instantanée</h3>
        <p>Créez un compte en quelques clics et commencez à utiliser nos services immédiatement.</p>
      </div>
      <div class="avantage-card fade-in">
        <i class="fas fa-lock" style="color:#9a22ed;"></i>
        <h3>Sécurité renforcée</h3>
        <p>Nous utilisons les dernières technologies pour garantir la confidentialité de vos données.</p>
      </div>
      <div class="avantage-card fade-in">
        <i class="fas fa-globe" style="color:#9a22ed;"></i>
        <h3>100% en ligne</h3>
        <p>Plus besoin de vous déplacer. Gérez tout depuis chez vous, à toute heure.</p>
      </div>
      <div class="avantage-card fade-in">
        <i class="fas fa-users" style="color:#9a22ed;"></i>
        <h3>Support client 7j/7</h3>
        <p>Nos conseillers sont là pour vous accompagner, même le week-end.</p>
      </div>
    </div>
  </section>

  <!-- SECTION CARTE BANCAIRE -->
  <section id="carte" class="modern-section carte-bancaire-section fade-in">
    <div class="carte-bancaire-container">
      <div class="carte-bancaire-text">
        <h3>Votre carte FlexiBank, votre liberté</h3>
        <p>Profitez d'une carte virtuelle pour vos paiements en ligne et physiques, compatible avec Apple Pay et Google Pay. Gérez vos plafonds, faites opposition en un clic, directement depuis votre espace client.</p>
        <a href="{{ path('card_dashboard') }}" class="btn-primary2">Commander ma carte</a>
      </div>

      <div class="carte-bancaire-spline">
        <video autoplay muted loop playsinline preload="auto" class="carte-video">
          <source src="{{ asset('images/spline3.mp4') }}" type="video/mp4" />Votre navigateur ne supporte pas la lecture vidéo.
        </video>
      </div>
    </div>
  </section>

  <section class="modern-section steps-section fade-in">
    <div class="section-header">
      <h2>Comment ça marche ?</h2>
      <p>Créer un compte et profiter de tous les avantages de FlexiBank, en seulement 3 étapes.</p>
    </div>

    <div class="steps-progress-container">
      <div class="steps-grid">
        <div class="step-card">
          <span class="step-number">1</span>
          <h3>Ouvrez votre compte</h3>
          <p>Remplissez un formulaire en ligne sécurisé, sans paperasse inutile.</p>
        </div>

        <div class="progress-line"></div>

        <div class="step-card">
          <span class="step-number">2</span>
          <h3>Validez votre identité</h3>
          <p>Utilisez votre pièce d’identité pour une vérification rapide et conforme.</p>
        </div>

        <div class="progress-line"></div>

        <div class="step-card">
          <span class="step-number">3</span>
          <h3>Accédez à votre espace</h3>
          <p>Votre compte est actif, profitez des services FlexiBank depuis votre tableau de bord.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="modern-section securite-section fade-in">
    <div class="securite-content">
      <i class="fas fa-shield-alt"></i>
      <h3>La sécurité est notre priorité</h3>
      <p>FlexiBank utilise des technologies de cryptage avancées et une authentification biométrique pour protéger vos données.</p>
    </div>
  </section>

  <section class="modern-section app-video-section">
    <div class="app-video-container">
      <div class="app-video-text">
        <h2>FlexiBank dans votre poche</h2>
        <p>Suivez vos dépenses, réalisez vos virements et gérez vos cartes où que vous soyez grâce à notre application mobile disponible 24/7.</p>
        <a href="#" class="btn-primary">Prochainement sur iOS & Android</a>
      </div>

      <div class="app-video-wrapper">
        <video autoplay muted loop playsinline preload="none" loading="lazy" class="app-demo-video">
          <source src="{{ asset('images/spline.mp4') }}" type="video/mp4" />Votre navigateur ne supporte pas la lecture vidéo.
        </video>
      </div>
    </div>
  </section>

  <section class="modern-section statistiques-avis-section fade-in">
    <div class="section-header">
      <h2>FlexiBank en chiffres</h2>
      <p>Une croissance rapide et des utilisateurs satisfaits.</p>
    </div>

    <div class="chiffres-cles">
      <div class="chiffre-cle">
        <h3>+50 000</h3>
        <p>Clients satisfaits</p>
      </div>
      <div class="chiffre-cle">
        <h3>99,8%</h3>
        <p>Transactions sécurisées</p>
      </div>
      <div class="chiffre-cle">
        <h3>4.9/5</h3>
        <p>Note moyenne sur les stores</p>
      </div>
      <div class="chiffre-cle">
        <h3>+120M€</h3>
        <p>De fonds gérés</p>
      </div>
    </div>

    <div class="section-header testimonials-header">
      <h2>Ils nous font confiance</h2>
      <p>Découvrez ce que nos clients pensent de FlexiBank.</p>
    </div>

    <div class="avis-clients">
      <div class="avis-card">
        <p>"Une application super intuitive, parfaite pour gérer mon compte au quotidien."</p>
        <h4>Laura M.</h4>
      </div>
      <div class="avis-card">
        <p>"Service client ultra réactif et sécurisé. Je recommande sans hésiter."</p>
        <h4>Thomas B.</h4>
      </div>
      <div class="avis-card">
        <p>"J'adore pouvoir générer des cartes virtuelles à la demande pour mes achats en ligne."</p>
        <h4>Élodie R.</h4>
      </div>
    </div>
  </section>

  <!-- FOOTER MODERNE -->
  <footer class="footer-modern">
    <div class="footer-content">
      <div class="footer-columns">
        <div class="footer-column">
          <h3 class="footer-logo">FlexiBank</h3>
          <p>Votre banque en ligne sécurisée, rapide et intuitive.</p>
          <div class="footer-socials">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
          </div>

          <!-- ✅ Newsletter ici -->
          <div class="footer-newsletter">
            <h4>Inscrivez-vous à notre newsletter</h4>

            <div id="newsletter-feedback" class="newsletter-feedback" style="display: none;"></div>

            <div class="newsletter" id="newsletter">
              {{ form_start(newsletterForm, { attr: { class: 'newsletter-form', id: 'newsletter-form' }, action: path('newsletter') }) }}

              {{ form_widget(newsletterForm.email, { attr: { class: 'newsletter-input', placeholder: 'Entrer votre adresse mail' } }) }}

              <button type="submit"><i class="fas fa-arrow-right"></i></button>

              {{ form_end(newsletterForm) }}

              {% for message in app.flashes('success') %}
                <div class="flash-success auto-hide">{{ message }}</div>
              {% endfor %}
            </div>
          </div>
        </div>

        <div class="footer-column">
          <h4>FlexiBank</h4>
          <ul>
            <li>
              <a href="{{ path('conditionsgenerales') }}">Conditions générales</a>
            </li>
            <li>
              <a href="{{ path('propos') }}">A propos</a>
            </li>
            <li>
              <a href="{{ path('nosservices') }}">Nos services</a>
            </li>
            <li>
              <a href="{{ path('contact') }}">Contact</a>
            </li>
          </ul>
        </div>

        <div class="footer-column">
          <h4>Informations</h4>
          <ul>
            <li>
              <a href="{{ path('faq') }}">FAQ</a>
            </li>
            <li>
              <a href="{{ path('politique') }}">Politique de confidentialité</a>
            </li>
            <li>
              <a href="{{ path('mentions') }}">Mentions légales</a>
            </li>
            <li>
              <a href="{{ path('cookie') }}">Cookies</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2025 FlexiBank. Tous droits réservés.</p>
      </div>
    </div>
  </footer>

  <!-- Overlay de fond grisé -->
  <div id="cookie-overlay" style="
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: rgba(0, 0, 0, 0.4);
  z-index: 9998;
"></div>

  <!-- Bannière cookies style luxe -->
  <div id="cookie-banner" style="
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: black;
  color: whites;
  padding: 40px 50px; /* Augmentation du padding */
  border-radius: 5px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  z-index: 9999;
  display: none;
  width: 95%; /* Augmentation de la largeur de la bannière */
  max-width: 1000px; /* Limite maximale augmentée */
  font-family: 'Segoe UI', sans-serif;
  text-align: left;
">
    <button id="decline-cookies" style="
  position: absolute;
  top: 20px;
  right: 20px;
  background: none;
  border: none;
  font-size: 0.85em;
  color: #00d0ff;
  cursor: pointer;
  font-weight: bold;
  text-decoration: underline;
">Continuer sans accepter</button>

    <h2 style="#00d0ffmargin-top: 0; font-size: 1.3em; color: #00d0ff;">VOS PARAMÈTRES DE COOKIES</h2>
    <br />
    <hr />
    <br />
    <p style="margin-bottom: 15px; font-size: 0.9em;">BIENVENUE SUR LE SITE FLEXIBANK.COM</p>
    <p style="font-size: 0.95em; line-height: 1.5em;">Nous utilisons des cookies, y compris des cookies tiers, à des fins de fonctionnement, d’analyses statistiques, de personnalisation de votre expérience, afin de vous proposer des contenus ciblés adaptés à vos centres d’intérêts et analyser la performance de nos campagnes publicitaires.</p>
    <p style="font-size: 0.9em; margin-top: 15px;">Vous pouvez accepter ces cookies en cliquant sur "Tout accepter et continuer" ou cliquer sur "Paramétrer les cookies"pour gérer vos préférences.</p>

    <div style="margin-top: 25px; display: flex; gap: 10px;">
      <button id="cookie-settings" style="
    background-color: white;
    color: #00d0ff;
    border: 2px solid #00d0ff;
    padding: 17px 20px;
    border-radius: 35px;
    font-weight: bold;
    cursor: pointer;
    flex: 1;
    font-size:1em;
    font-family: sans-serif;
  ">Paramétrer les cookies</button>

      <button id="accept-cookies" style="
    background-color: #00d0ff;
    color: white;
    border: none;
    padding: 17px 20px;
    border-radius: 35px;
    font-weight: bold;
    cursor: pointer;
    flex: 1;
    font-size:1em;
    font-family: sans-serif;
  ">Tout accepter et continuer</button>
    </div>

    <p style="margin-top: 20px; font-size: 0.8em; color: #666;">
      Vous pouvez à tout moment modifier vos préférences en vous rendant dans la section <strong>"COOKIES"</strong> ou la section<strong>"MENTIONS LÉGALES & DONNÉES PERSONNELLES"</strong> en bas de la page du site flexibank.com<br />
      <a href="{{ path('cookie') }}" style="color: #00d0ff; text-decoration: underline;">Voir la liste des cookies utilisés</a>
      <p style="margin-top: 20px; font-size: 0.8em; color: #666;">
        Pour en savoir plus sur notre politique en matière de cookies, notre <a href="{{ path('politique') }}" style="color: #00d0ff; text-decoration: underline;">Politique de Données Personnelles</a>
      </p>
    </p>
  </div>

  <!-- Modale de paramétrage des cookies -->
  <div id="cookie-settings-modal" style="
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  color: #333;
  padding: 40px 50px;
  border-radius: 5px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  z-index: 10000;
  width: 95%;
  max-width: 800px;
  font-family: 'Segoe UI', sans-serif;
  text-align: left;
">
    <h2 style="margin-top: 0; font-size: 1.3em; color: #00d0ff;">Paramètres avancés des cookies</h2>
    <br />
    <hr />
    <br />

    <p style="font-size: 0.95em; line-height: 1.6em;">Vous pouvez ici personnaliser votre expérience en choisissant les types de cookies que vous souhaitez activer.</p>

    <form id="cookie-preferences-form" style="margin-top: 20px; font-size: 0.95em;">
      <div style="margin-bottom: 15px;">
        <label>
          <input type="checkbox" name="necessary" checked disabled style="margin-right: 10px;" />
          <strong>Cookies nécessaires</strong> – indispensables au bon fonctionnement du site.
        </label>
      </div>

      <div style="margin-bottom: 15px;">
        <label>
          <input type="checkbox" name="analytics" style="margin-right: 10px;" />
          <strong>Cookies de statistiques</strong> – pour améliorer l’expérience utilisateur grâce à des analyses anonymes.
        </label>
      </div>

      <div style="margin-bottom: 15px;">
        <label>
          <input type="checkbox" name="marketing" style="margin-right: 10px;" />
          <strong>Cookies marketing</strong> – pour personnaliser les publicités affichées.
        </label>
      </div>

      <div style="margin-bottom: 25px;">
        <label>
          <input type="checkbox" name="personalization" style="margin-right: 10px;" />
          <strong>Cookies de personnalisation</strong> – pour adapter le contenu à vos préférences.
        </label>
      </div>

      <div style="display: flex; gap: 10px; justify-content: flex-end;">
        <button type="button" id="close-cookie-settings" style="
        background-color: white;
        color: #00d0ff;
        border: 2px solid #00d0ff;
        padding: 12px 20px;
        border-radius: 35px;
        font-weight: bold;
        cursor: pointer;
        font-size: 1em;
        font-family: 'Segoe UI', sans-serif;
      ">Annuler</button>

        <button type="submit" style="
        background-color: #00d0ff;
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 35px;
        font-weight: bold;
        cursor: pointer;
        font-size: 1em;
        font-family: 'Segoe UI', sans-serif;
      ">Enregistrer mes choix</button>
      </div>
    </form>

    <p style="margin-top: 25px; font-size: 0.8em; color: #666;">
      Pour plus d’informations, consultez notre <a href="{{ path('politique') }}" style="color: #00d0ff; text-decoration: underline;">Politique de Données Personnelles</a>.
    </p>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const toggleBtn = document.getElementById('hamburger-btn')
      const mobileMenu = document.getElementById('mobile-menu')
    
      if (toggleBtn && mobileMenu) {
        toggleBtn.addEventListener('click', () => {
          mobileMenu.classList.toggle('show')
        })
      }
    })
  </script>

  <script>
function getCookie(name) {
  const value = "; " + document.cookie;
  const parts = value.split("; " + name + "=");
  if (parts.length === 2) return parts.pop().split(";").shift();
}

function hideCookieBanner() {
  document.getElementById('cookie-banner').style.display = 'none';
  document.getElementById('cookie-overlay').style.display = 'none';
  document.body.classList.remove('no-scroll');
}

function showCookieBanner() {
  document.getElementById('cookie-banner').style.display = 'block';
  document.getElementById('cookie-overlay').style.display = 'block';
  document.body.classList.add('no-scroll');
}

window.addEventListener('load', function () {
  const consent = getCookie('cookie_consent');
  const preferences = getCookie('cookie_preferences');

  if (!consent && !preferences) {
    showCookieBanner();
  } else {
    hideCookieBanner();
  }

  // Bouton "Tout accepter"
  document.getElementById('accept-cookies').addEventListener('click', function () {
    document.cookie = "cookie_consent=true; path=/; max-age=" + 60 * 60 * 24 * 365;
    hideCookieBanner();
  });

  // Bouton "Continuer sans accepter"
  document.getElementById('decline-cookies').addEventListener('click', function () {
    document.cookie = "cookie_consent=false; path=/; max-age=" + 60 * 60 * 24 * 365;
    hideCookieBanner();
  });

  // Bouton "Paramétrer les cookies"
  document.getElementById('cookie-settings').addEventListener('click', function () {
    document.getElementById('cookie-settings-modal').style.display = 'block';
    document.getElementById('cookie-overlay').style.display = 'block';
    document.body.classList.add('no-scroll');
  });

  // Fermeture de la modale
  document.getElementById('close-cookie-settings').addEventListener('click', function () {
    document.getElementById('cookie-settings-modal').style.display = 'none';
    document.getElementById('cookie-overlay').style.display = 'none';
    document.body.classList.remove('no-scroll');
  });

  // Validation du formulaire des préférences
  document.getElementById('cookie-preferences-form').addEventListener('submit', function (e) {
    e.preventDefault();

    const form = e.target;
    const preferences = {
      necessary: true,
      analytics: form.analytics.checked,
      marketing: form.marketing.checked,
      personalization: form.personalization.checked
    };

    document.cookie = "cookie_preferences=" + JSON.stringify(preferences) + "; path=/; max-age=" + 60 * 60 * 24 * 365;
    document.cookie = "cookie_consent=true; path=/; max-age=" + 60 * 60 * 24 * 365;

    hideCookieBanner();
    document.getElementById('cookie-settings-modal').style.display = 'none';
  });
});
</script>
{% endblock %}
